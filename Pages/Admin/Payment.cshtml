@page
@model ECommerceWeb.Pages.Admin.PaymentModel
@{
   
}

<style>
    body {
        font-family: 'Poppins', sans-serif;
        background-color: #f0f2f5;
        padding-bottom: 50px;
    }

    h2 {
        background: linear-gradient(135deg, #ff5f6d, #ffc371);
        box-shadow: 0 0 10px rgba(255, 95, 109, 0.5);
        color: white;
        text-align: center;
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 25px;
    }

    .form-wrapper {
        max-width: 700px;
        margin: 20px auto;
        background-color: #ffffff;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .breadcrumb-item a {
        color: #ff5f6d;
        font-weight: 500;
    }

        .breadcrumb-item a:hover {
            color: #ff66d9;
            text-decoration: underline;
        }

    li.breadcrumb-item.active{
        color: blue;
        font-weight: 500;
        }


        li.breadcrumb-item.active:hover {
        color: yellowgreen;
        text-decoration: underline;
    }
    .form-control:focus {
        border-color: #ff5f6d;
        box-shadow: 0 0 8px rgba(255, 95, 109, 0.3);
    }

    .btn-primary {
        background-color: #ff5f6d;
        border: none;
        padding: 12px 25px;
        font-weight: bold;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

        .btn-primary:hover {
            background-color: #ff66d9;
            box-shadow: 0 4px 8px rgba(255, 95, 109, 0.2);
        }

    input::placeholder {
        color: #ccc;
    }

    .payment-icon {
        width: 40px;
        height: 25px;
        margin-left: 10px;
    }


    /* h2 {
        background: linear-gradient(135deg, #136a8a, #f9d423);
        box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
        color: white;
        text-align: center;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 30px;
    }

    .form-wrapper {
        max-width: 600px;
        margin: auto;
        background-color: #ffffff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .breadcrumb {
        background: none;
    }

    .breadcrumb-item a {
        color: #136a8a;
        text-decoration: none;
    }

        .breadcrumb-item a:hover {
            text-decoration: underline;
        }

    .form-control:focus {
        border-color: #4CAF50;
        box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
    }

    .btn-primary {
        background-color: #4CAF50;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

        .btn-primary:hover {
            background-color: #ff66d9;
        } */
</style>

<!-- Main Content -->
<div class="content-wrapper">
    <section class="content-header">
        <div class="row">
            <div class="col-md-12">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a asp-page="index">Home</a></li>
                        <li class="breadcrumb-item active">payment</li>
                    </ol>
                </nav>
            </div>
        </div>
    </section>

    <!-- payment Form -->
    <div class="form-wrapper">
        <h2>Make payment</h2>

        <form id="paymentForm" method="post">
            <div class="form-group">
                <label asp-for="payment.OrderId">Order ID</label>
                <input asp-for="payment.OrderId" class="form-control" />
            </div>

            <div class="form-group">
                <label asp-for="payment.OrderDetailId">Order Detail ID</label>
                <input asp-for="payment.OrderDetailId" class="form-control" />
            </div>

            <div class="form-group">
                <label asp-for="payment.CardNo">Card Number</label>
                <input asp-for="payment.CardNo" class="form-control" type="text" placeholder="XXXX-XXXX-XXXX-XXXX" id="cardNumber" maxlength="16" required />
            </div>

            <div class="form-group">
                <label asp-for="payment.ExpiryDate">Expiry Date</label>
                <input asp-for="payment.ExpiryDate" class="form-control" type="text" placeholder="MM/YY" id="expiryDate" required />
            </div>

            <div class="form-group">
                <label asp-for="payment.CvvNo">CVV</label>
                <input asp-for="payment.CvvNo" class="form-control" type="password" placeholder="XXX" maxlength="3" id="cvv" required />
            </div>

            <div class="form-group">
                <label asp-for="payment.Address">Billing Address</label>
                <input asp-for="payment.Address" class="form-control" placeholder="Enter your billing address" />
            </div>

            <div class="form-group">
                <label asp-for="payment.PaymentMode">payment Mode</label>
                <select asp-for="payment.PaymentMode" class="form-control" id="paymentMode" required>
                    <option value="Card">Card</option>
                    <option value="UPI">UPI</option>
                    <option value="Cheque">Cheque</option>
                    <option value="DD">DD</option>
                    <option value="NEFT">NEFT</option>
                    <option value="RTGS">RTGS</option>
                    <option value="IMPS">IMPS</option>
                    <option value="Net Banking">Net Banking</option>
                    <option value="Debit Card">Debit Card</option>
                    <option value="Credit Card">Credit Card</option>
                    <option value="PhonePe">PhonePe</option>
                    <option value="GooglePay">GooglePay</option>
                    <option value="Paytm">Paytm</option>
                    <option value="Paypal">Paypal</option>
                    <option value="Netbanking">Netbanking</option>
                    <option value="LazyPay">LazyPay</option>
                    <option value="AmazonPayBalance">Amazon Pay Balance</option>
                    <option value="COD">Cash on Delivery</option>
                </select>
            </div>
            

            <div class="order-summary mb-4">
                <h3>Order Summary</h3>

                 <h4>Order Summary for Order: @Model.payment</h4>
                <p>Order ID: @Model.OrderDetails</p>
 
                <ul>
                    @foreach (var item in Model.Orderitem)
                    {
                        <li>Order Id: @item.OrderNumber</li>
                        <li>OrderItems: @item.OrderNumber</li>
                        <li>SubPrice:@item.SubPrice</li>
                         <li>Price: @item.Price</li> 
                    }
                </ul> 

                 <p>Shipping: Free</p>
                <p>Taxes: $5.99</p>
                <p>Payment Mode: @Model.payment</p>
                <hr /> 

               @*  <h4>Total: @((Model.orderDat.OrderItems.Sum(o => o.Product.Price) + 5.99).ToString("C"))</h4> *@
            </div>




            <button type="submit" class="btn btn-primary w-100">Make payment</button>
        </form>
    </div>
</div>

<!-- JavaScript for Client-Side Validation -->
<script>
document.getElementById("paymentForm").addEventListener("submit", function (event) {
    var cardNumber = document.getElementById("cardNumber").value;
    var expiryDate = document.getElementById("expiryDate").value;
    var cvv = document.getElementById("cvv").value;
    var paymentMode = document.getElementById("paymentMode").value;

    if (paymentMode === "Card") {
        if (cardNumber.length !== 16) {
            alert("Please enter a valid 16-digit card number.");
            event.preventDefault();
        }

        var expiryPattern = /^(0[1-9]|1[0-2])\/\d{2}$/;
        if (!expiryPattern.test(expiryDate)) {
            alert("Please enter a valid expiry date in MM/YY format.");
            event.preventDefault();
        }

        if (cvv.length !== 3) {
            alert("Please enter a valid 3-digit CVV number.");
            event.preventDefault();
        }
    }
});

// Auto-detect credit card type based on input
document.getElementById("cardNumber").addEventListener("input", function () {
    var cardNumber = this.value;
    var visaPattern = /^4[0-9]{6,}$/;
    var mastercardPattern = /^5[1-5][0-9]{5,}$/;
    var cardIcon = document.getElementById("cardIcon");

    if (visaPattern.test(cardNumber)) {
        cardIcon.src = "/images/visa.png";  // Add icons to project
    } else if (mastercardPattern.test(cardNumber)) {
        cardIcon.src = "/images/mastercard.png";
    } else {
        cardIcon.src = "";
    }
});
</script>

@* <script>
    document.getElementById("paymentForm").addEventListener("submit", function (event) {
        var cardNumber = document.getElementById("cardNumber").value;
        var expiryDate = document.getElementById("expiryDate").value;
        var cvv = document.getElementById("cvv").value;
        var paymentMode = document.getElementById("paymentMode").value;

        // Validate card number (basic validation)
        if (paymentMode === "Card") {
            if (cardNumber.length !== 16) {
                alert("Please enter a valid 16-digit card number.");
                event.preventDefault();
            }

            // Validate expiry date format MM/YY
            var expiryPattern = /^(0[1-9]|1[0-2])\/\d{2}$/;
            if (!expiryPattern.test(expiryDate)) {
                alert("Please enter a valid expiry date in MM/YY format.");
                event.preventDefault();
            }

            // Validate CVV
            if (cvv.length !== 3) {
                alert("Please enter a valid 3-digit CVV number.");
                event.preventDefault();
            }
        }
    });
</script> *@
